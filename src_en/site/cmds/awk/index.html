<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="itech001">
        <link rel="canonical" href="www.linux6.com/cmds/awk/index.html">
        <link rel="shortcut icon" href="../../favicon.ico">
        

        <title>awk - Linux6</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../index.html">Linux6</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Env <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../env/virtualbox/index.html">Virtualbox</a>
                        </li>
                    
                        <li >
                            <a href="../../env/vim_setting/index.html">VIM_setting</a>
                        </li>
                    
                        <li >
                            <a href="../../env/vi/index.html">VIM_intro</a>
                        </li>
                    
                        <li >
                            <a href="../../env/vim_cheatsheet/index.html">VIM_cheatsheet</a>
                        </li>
                    
                        <li >
                            <a href="../../env/dotfiles/index.html">Dotfiles</a>
                        </li>
                    
                        <li >
                            <a href="../../env/alias/index.html">Alias</a>
                        </li>
                    
                        <li >
                            <a href="../../env/shortcut/index.html">Shortcut</a>
                        </li>
                    
                        <li >
                            <a href="../../env/tmux/index.html">Tmux</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cmds <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../cmds_common/index.html">cmds_common</a>
                        </li>
                    
                        <li >
                            <a href="../cmds_example/index.html">cmds_example</a>
                        </li>
                    
                        <li >
                            <a href="../cmds_overview/index.html">cmds_man</a>
                        </li>
                    
                        <li >
                            <a href="../find/index.html">find</a>
                        </li>
                    
                        <li >
                            <a href="../xargs/index.html">xargs</a>
                        </li>
                    
                        <li >
                            <a href="../grep/index.html">grep</a>
                        </li>
                    
                        <li >
                            <a href="../sed/index.html">sed</a>
                        </li>
                    
                        <li class="active">
                            <a href="index.html">awk</a>
                        </li>
                    
                        <li >
                            <a href="../for/index.html">for</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Script <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../shell/bash/index.html">Bash</a>
                        </li>
                    
                        <li >
                            <a href="../../shell/bash_example/index.html">Bash_example</a>
                        </li>
                    
                        <li >
                            <a href="../../shell/bash_summary/index.html">Bash_summary</a>
                        </li>
                    
                        <li >
                            <a href="../../shell/csh/index.html">Csh</a>
                        </li>
                    
                        <li >
                            <a href="../../shell/zsh/index.html">Zsh</a>
                        </li>
                    
                        <li >
                            <a href="../../shell/shell_compare/index.html">Shell_compare</a>
                        </li>
                    
                        <li >
                            <a href="../../shell/perl/index.html">Perl</a>
                        </li>
                    
                        <li >
                            <a href="../../shell/python/index.html">Python</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dev <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../dev/git/index.html">git-tutorial</a>
                        </li>
                    
                        <li >
                            <a href="../../dev/git_cheat_sheet/index.html">git-cheat-sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../dev/gdb/index.html">gdb</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Adv <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../adv/article/index.html">Article</a>
                        </li>
                    
                        <li >
                            <a href="../../adv/os/index.html">OS</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">FAQ <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../faq/common/index.html">Common</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ref <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../ref/awesome-linux-resources/README/index.html">awesome_linux</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/awesome-shell/README/index.html">awesome_shell</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/awesome-dotfiles/README/index.html">awesome_dotfiles</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/awesome-devenv/README/index.html">awesome_devenv</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/awesome-sysadmin/README/index.html">awesome_sysadmin</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/awesome-python/README/index.html">awesome_python</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/free-programming-books/README/index.html">free_programming_book</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/Git-Cheat-Sheet/README/index.html">git_cheat_sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/github-cheat-sheet/README/index.html">github_cheat_sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../ref/awesome/readme/index.html">awesome</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rss <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../rss/linux_rss2/index.html">Linux RSS</a>
                        </li>
                    
                        <li >
                            <a href="../../rss/github_rss2/index.html">Github RSS</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../about/about/index.html">About</a>
                        </li>
                    
                        <li >
                            <a href="../../about/contact_form/index.html">Contact</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                 <li>
                   <a href="#" data-toggle="modal" data-target="#search_modal"><i class="fa fa-search"></i> Search</a>
                 </li>                       
                <li >
                    <a rel="next" href="../sed/index.html">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../for/index.html">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container" id="main">
            <div class="col-md-12" role="main">

<h1 id="the-examples-for-awk">The examples for awk</h1>
<pre><code>The examples for awk

# Print first two fields in opposite order:
  awk '{ print $2, $1 }' file


# Print lines longer than 72 characters:
  awk 'length &gt; 72' file


# Print length of string in 2nd column
  awk '{print length($2)}' file


# Add up first column, print sum and average:
       { s += $1 }
  END  { print &quot;sum is&quot;, s, &quot; average is&quot;, s/NR }


# Print fields in reverse order:
  awk '{ for (i = NF; i &gt; 0; --i) print $i }' file


# Print the last line
      {line = $0}
  END {print line}


# Print the total number of lines that contain the word Pat
  /Pat/ {nlines = nlines + 1}
  END {print nlines}


# Print all lines between start/stop pairs:
  awk '/start/, /stop/' file


# Print all lines whose first field is different from previous one:
  awk '$1 != prev { print; prev = $1 }' file


# Print column 3 if column 1 &gt; column 2:
  awk '$1 &gt; $2 {print $3}' file


# Print line if column 3 &gt; column 2:
  awk '$3 &gt; $2' file


# Count number of lines where col 3 &gt; col 1
  awk '$3 &gt; $1 {print i + &quot;1&quot;; i++}' file


# Print sequence number and then column 1 of file:
  awk '{print NR, $1}' file


# Print every line after erasing the 2nd field
  awk '{$2 = &quot;&quot;; print}' file


# Print hi 28 times
  yes | head -28 | awk '{ print &quot;hi&quot; }'


# Print hi.0010 to hi.0099 (NOTE IRAF USERS!)
  yes | head -90 | awk '{printf(&quot;hi00%2.0f \n&quot;, NR+9)}'

# Print out 4 random numbers between 0 and 1
yes | head -4 | awk '{print rand()}'

# Print out 40 random integers modulo 5
yes | head -40 | awk '{print int(100*rand()) % 5}'


# Replace every field by its absolute value
  { for (i = 1; i &lt;= NF; i=i+1) if ($i &lt; 0) $i = -$i print}

# If you have another character that delimits fields, use the -F option
# For example, to print out the phone number for Jones in the following file,
# 000902|Beavis|Theodore|333-242-2222|149092
# 000901|Jones|Bill|532-382-0342|234023
# ...
# type
  awk -F&quot;|&quot; '$2==&quot;Jones&quot;{print $4}' filename



# Some looping commands
# Remove a bunch of print jobs from the queue
  BEGIN{
    for (i=875;i&gt;833;i--){
        printf &quot;lprm -Plw %d\n&quot;, i
    } exit
       }


 Formatted printouts are of the form printf( &quot;format\n&quot;, value1, value2, ... valueN)
        e.g. printf(&quot;howdy %-8s What it is bro. %.2f\n&quot;, $1, $2*$3)
    %s = string
    %-8s = 8 character string left justified
    %.2f = number with 2 places after .
    %6.2f = field 6 chars with 2 chars after .
    \n is newline
    \t is a tab


# Print frequency histogram of column of numbers
$2 &lt;= 0.1 {na=na+1}
($2 &gt; 0.1) &amp;&amp; ($2 &lt;= 0.2) {nb = nb+1}
($2 &gt; 0.2) &amp;&amp; ($2 &lt;= 0.3) {nc = nc+1}
($2 &gt; 0.3) &amp;&amp; ($2 &lt;= 0.4) {nd = nd+1}
($2 &gt; 0.4) &amp;&amp; ($2 &lt;= 0.5) {ne = ne+1}
($2 &gt; 0.5) &amp;&amp; ($2 &lt;= 0.6) {nf = nf+1}
($2 &gt; 0.6) &amp;&amp; ($2 &lt;= 0.7) {ng = ng+1}
($2 &gt; 0.7) &amp;&amp; ($2 &lt;= 0.8) {nh = nh+1}
($2 &gt; 0.8) &amp;&amp; ($2 &lt;= 0.9) {ni = ni+1}
($2 &gt; 0.9) {nj = nj+1}
END {print na, nb, nc, nd, ne, nf, ng, nh, ni, nj, NR}


# Find maximum and minimum values present in column 1
NR == 1 {m=$1 ; p=$1}
$1 &gt;= m {m = $1}
$1 &lt;= p {p = $1}
END { print &quot;Max = &quot; m, &quot;   Min = &quot; p }

# Example of defining variables, multiple commands on one line
NR == 1 {prev=$4; preva = $1; prevb = $2; n=0; sum=0}
$4 != prev {print preva, prevb, prev, sum/n; n=0; sum=0; prev = $4; preva = $1; prevb = $2}
$4 == prev {n++; sum=sum+$5/$6}
END {print preva, prevb, prev, sum/n}

# Example of defining and using a function, inserting values into an array
# and doing integer arithmetic mod(n). This script finds the number of days
# elapsed since Jan 1, 1901. (from http://www.netlib.org/research/awkbookcode/ch3)
function daynum(y, m, d,    days, i, n)
{   # 1 == Jan 1, 1901
    split(&quot;31 28 31 30 31 30 31 31 30 31 30 31&quot;, days)
    # 365 days a year, plus one for each leap year
    n = (y-1901) * 365 + int((y-1901)/4)
    if (y % 4 == 0) # leap year from 1901 to 2099
        days[2]++
    for (i = 1; i &lt; m; i++)
        n += days[i]
    return n + d
}
    { print daynum($1, $2, $3) }

# Example of using substrings
# substr($2,9,7) picks out characters 9 thru 15 of column 2
{print &quot;imarith&quot;, substr($2,1,7) &quot; - &quot; $3, &quot;out.&quot;substr($2,5,3)}
{print &quot;imarith&quot;, substr($2,9,7) &quot; - &quot; $3, &quot;out.&quot;substr($2,13,3)}
{print &quot;imarith&quot;, substr($2,17,7) &quot; - &quot; $3, &quot;out.&quot;substr($2,21,3)}
{print &quot;imarith&quot;, substr($2,25,7) &quot; - &quot; $3, &quot;out.&quot;substr($2,29,3)}

[](http://sparky.rice.edu/~hartigan/awk.html)
</code></pre>

</div>
        </div>

        <div><hr>
        <div class="container" id="footer">
        <div class="col-md-12">
            
                <p>Contact me by email:<a href=mailto:itech001@126.com>itech001@126.com</a>, Contribute your great articles or suggestions in <a href=https://github.com/itech001/linux6>github</a>.</p>
            
        </div>
        </div>
        </div>

        <script src="../../js/prettify-1.0.min.js"></script>
        <script>var base_url = '../..';</script>
        <script src="../../js/tipuesearch/tipuesearch_content.js"></script>
        <script src="../../js/tipuesearch/tipuesearch.js"></script>
        <script src="../../js/tipuesearch/tipuesearch_set.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../"></script>


<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5497b1a160364736" async="async"></script>


    <div class="modal" id="search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                   <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search words into the box below and click
                            "search".
                        </p>
                        <form role="form">
                        <div class="form-group">
                                <input type="text" class="form-control" name="q" id="tipue_search_input">
                                <button type="submit" class="btn">Search</button>
                         </div>
                    </form>
                        <div id="tipue_search_content"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
    </div>

    </body>
</html>