<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="itech001">
        <link rel="canonical" href="www.linux6.com/cmds/cmds_manpage/visudo/index.html">
        <link rel="shortcut icon" href="../../../favicon.ico">
        

        <title>visudo - Linux6</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../../index.html">Linux6</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Env <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../env/virtualbox/index.html">Virtualbox</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/vim_setting/index.html">VIM_setting</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/vi/index.html">VIM_intro</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/vim_cheatsheet/index.html">VIM_cheatsheet</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/dotfiles/index.html">Dotfiles</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/alias/index.html">Alias</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/shortcut/index.html">Shortcut</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/tmux/index.html">Tmux</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cmds <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../cmds_common/index.html">cmds_common</a>
                        </li>
                    
                        <li >
                            <a href="../../cmds_example/index.html">cmds_example</a>
                        </li>
                    
                        <li >
                            <a href="../../cmds_overview/index.html">cmds_man</a>
                        </li>
                    
                        <li >
                            <a href="../../find/index.html">find</a>
                        </li>
                    
                        <li >
                            <a href="../../xargs/index.html">xargs</a>
                        </li>
                    
                        <li >
                            <a href="../../grep/index.html">grep</a>
                        </li>
                    
                        <li >
                            <a href="../../sed/index.html">sed</a>
                        </li>
                    
                        <li >
                            <a href="../../awk/index.html">awk</a>
                        </li>
                    
                        <li >
                            <a href="../../for/index.html">for</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Script <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../shell/bash/index.html">Bash</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/bash_example/index.html">Bash_example</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/bash_summary/index.html">Bash_summary</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/bash_bible/index.html">Bash_bible</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/csh/index.html">Csh</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/zsh/index.html">Zsh</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/shell_compare/index.html">Shell_compare</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/perl/index.html">Perl</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/python/index.html">Python</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dev <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../dev/git/index.html">git-tutorial</a>
                        </li>
                    
                        <li >
                            <a href="../../../dev/git_cheat_sheet/index.html">git-cheat-sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../../dev/gdb/index.html">gdb</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Adv <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../adv/article/index.html">Article</a>
                        </li>
                    
                        <li >
                            <a href="../../../adv/os/index.html">OS</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">FAQ <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../faq/common/index.html">Common</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ref <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../ref/awesome-linux-resources/README/index.html">awesome_linux</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-shell/README/index.html">awesome_shell</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-dotfiles/README/index.html">awesome_dotfiles</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-devenv/README/index.html">awesome_devenv</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-sysadmin/README/index.html">awesome_sysadmin</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-python/README/index.html">awesome_python</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/free-programming-books/README/index.html">free_programming_book</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/Git-Cheat-Sheet/README/index.html">git_cheat_sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/github-cheat-sheet/README/index.html">github_cheat_sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome/readme/index.html">awesome</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rss <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../rss/linux_rss2/index.html">Linux RSS</a>
                        </li>
                    
                        <li >
                            <a href="../../../rss/github_rss2/index.html">Github RSS</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../about/about/index.html">About</a>
                        </li>
                    
                        <li >
                            <a href="../../../about/contact_form/index.html">Contact</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                 <li>
                   <a href="#" data-toggle="modal" data-target="#search_modal"><i class="fa fa-search"></i> Search</a>
                 </li>                       
                <li class="disabled">
                    <a rel="next" >
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li class="disabled">
                    <a rel="prev" >
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container" id="main">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#visudo">visudo</a></li>
        
            <li><a href="#name">name</a></li>
        
            <li><a href="#synopsis">synopsis</a></li>
        
            <li><a href="#description">description</a></li>
        
            <li><a href="#environment">environment</a></li>
        
            <li><a href="#files">files</a></li>
        
            <li><a href="#diagnostics">diagnostics</a></li>
        
            <li><a href="#see-also">see also</a></li>
        
            <li><a href="#authors">authors</a></li>
        
            <li><a href="#caveats">caveats</a></li>
        
            <li><a href="#bugs">bugs</a></li>
        
            <li><a href="#support">support</a></li>
        
            <li><a href="#disclaimer">disclaimer</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="visudo">visudo</h1>
<h3 id="name">name</h3>
<pre><code>     visudo — edit the sudoers file

</code></pre>

<h3 id="synopsis">synopsis</h3>
<pre><code>     visudo [-chqsV] [-f sudoers] [-x file]

</code></pre>

<h3 id="description">description</h3>
<pre><code>     visudo edits the sudoers file in a safe fashion, analogous to vipw(8).  visudo locks the sudoers file against multiple simultaneous edits, provides basic sanity checks, and checks for parse errors.  If the sudoers file is currently being edited you will receive a message to try again later.

     There is a hard-coded list of one or more editors that visudo will use set at compile-time that may be overridden via the editor sudoers Default variable.  This list defaults to /usr/local/bin/vi.  Normally, visudo does not honor the VISUAL or EDITOR environment variables unless they contain an editor in the aforementioned editors list.  However, if visudo is configured with the --with-env-editor option or the env_editor Default variable is set in sudoers, visudo will use any the editor defines by VISUAL or EDITOR.  Note that this can be a security hole since it allows the user to execute any program they wish simply by setting VISUAL or EDITOR.

     visudo parses the sudoers file after the edit and will not save the changes if there is a syntax error.  Upon finding an error, visudo will print a message stating the line number(s) where the error occurred and the user will receive the “What now?” prompt.  At this point the user may enter ‘e’ to re-edit the sudoers file, ‘x’ to exit without saving the changes, or ‘Q’ to quit and save changes.  The ‘Q’ option should be used with extreme care because if visudo believes there to be a parse error, so will sudo and no one will be able to sudo again until the error is fixed.  If ‘e’ is typed to edit the sudoers file after a parse error has been detected, the cursor will be placed on the line where the error occurred (if the editor supports this feature).

     The options are as follows:

     -c, --check
                 Enable check-only mode.  The existing sudoers file will be checked for syntax errors, owner and mode.  A message will be printed to the standard output describing the status of sudoers unless the -q option was specified.  If the check completes successfully, visudo will exit with a value of 0.  If an error is encountered, visudo will exit with a value of 1.

     -f sudoers, --file=sudoers
                 Specify an alternate sudoers file location.  With this option, visudo will edit (or check) the sudoers file of your choice, instead of the default, /etc/sudoers.  The lock file used is the specified sudoers file with “.tmp” appended to it.  In check-only mode only, the argument to -f may be ‘-’, indicating that sudoers will be read from the standard input.

     -h, --help  Display a short help message to the standard output and exit.

     -q, --quiet
                 Enable quiet mode.  In this mode details about syntax errors are not printed.  This option is only useful when combined with the -c option.

     -s, --strict
                 Enable strict checking of the sudoers file.  If an alias is used before it is defined, visudo will consider this a parse error.  Note that it is not possible to differentiate between an alias and a host name or user name that consists solely of uppercase letters, digits, and the underscore (‘_’) character.

     -V, --version
                 Print the visudo and sudoers grammar versions and exit.

     -x file, --export=file
                 Export sudoers in JSON format and write it to file.  If file is ‘-’, the exported sudoers policy will to be written to the standard output.  The exported format is intended to be easier for third-party applications to parse that the traditional sudoers format.  The various values have explicit types which removes much of the ambiguity of the sudoers format.

</code></pre>

<h3 id="environment">environment</h3>
<pre><code>     The following environment variables may be consulted depending on the value of the editor and env_editor sudoers settings:

     VISUAL           Invoked by visudo as the editor to use

     EDITOR           Used by visudo if VISUAL is not set

</code></pre>

<h3 id="files">files</h3>
<pre><code>     /etc/sudoers              List of who can run what

     /etc/sudoers.tmp          Lock file for visudo

</code></pre>

<h3 id="diagnostics">diagnostics</h3>
<pre><code>     sudoers file busy, try again later.
           Someone else is currently editing the sudoers file.

     /etc/sudoers.tmp: Permission denied
           You didn't run visudo as root.

     Can't find you in the passwd database
           Your user ID does not appear in the system passwd file.

     Warning: {User,Runas,Host,Cmnd}_Alias referenced but not defined
           Either you are trying to use an undeclared {User,Runas,Host,Cmnd}_Alias or you have a user or host name listed that consists solely of uppercase letters, digits, and the underscore (‘_’) character.  In the latter case, you can ignore the warnings (sudo will not complain).  In -s (strict) mode these are errors, not warnings.

     Warning: unused {User,Runas,Host,Cmnd}_Alias
           The specified {User,Runas,Host,Cmnd}_Alias was defined but never used.  You may wish to comment out or remove the unused alias.  In -s (strict) mode this is an error, not a warning.

     Warning: cycle in {User,Runas,Host,Cmnd}_Alias
           The specified {User,Runas,Host,Cmnd}_Alias includes a reference to itself, either directly or through an alias it includes.  This is only a warning by default as sudo will ignore cycles when parsing the sudoers file.

</code></pre>

<h3 id="see-also">see also</h3>
<pre><code>     vi(1), sudoers(5), sudo(8), vipw(8)

</code></pre>

<h3 id="authors">authors</h3>
<pre><code>     Many people have worked on sudo over the years; this version consists of code written primarily by:

           Todd C. Miller

     See the CONTRIBUTORS file in the sudo distribution (http://www.sudo.ws/sudo/contributors.html) for an exhaustive list of people who have contributed to sudo.

</code></pre>

<h3 id="caveats">caveats</h3>
<pre><code>     There is no easy way to prevent a user from gaining a root shell if the editor used by visudo allows shell escapes.

</code></pre>

<h3 id="bugs">bugs</h3>
<pre><code>     If you feel you have found a bug in visudo, please submit a bug report at http://www.sudo.ws/sudo/bugs/

</code></pre>

<h3 id="support">support</h3>
<pre><code>     Limited free support is available via the sudo-users mailing list, see http://www.sudo.ws/mailman/listinfo/sudo-users to subscribe or search the archives.

</code></pre>

<h3 id="disclaimer">disclaimer</h3>
<pre><code>     visudo is provided “AS IS” and any express or implied warranties, including, but not limited to, the implied warranties of merchantability and fitness for a particular purpose are disclaimed.  See the LICENSE file distributed with sudo or http://www.sudo.ws/sudo/license.html for complete details.

</code></pre>

</div>
        </div>

        <div><hr>
        <div class="container" id="footer">
        <div class="col-md-12">
            
                <p><div align="center">联系作者:<a href=mailto:itech001@126.com>itech001@126.com</a>, 提交代码 <a href=https://github.com/itech001/linux6>github</a>, <font size="4" color=red>微信公众号cicdops</font><br> <img src=https://github.com/itech001/linux6/blob/master/gzh8.jpg?raw=true height="200" width="200"></div>.</p>
            
        </div>
        </div>
        </div>

        <script src="../../../js/prettify-1.0.min.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/tipuesearch/tipuesearch_content.js"></script>
        <script src="../../../js/tipuesearch/tipuesearch.js"></script>
        <script src="../../../js/tipuesearch/tipuesearch_set.js"></script>
        <script src="../../../js/base.js"></script>
        <script src="../../../"></script>


<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5497b1a160364736" async="async"></script>


    <div class="modal" id="search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                   <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search words into the box below and click
                            "search".
                        </p>
                        <form role="form">
                        <div class="form-group">
                                <input type="text" class="form-control" name="q" id="tipue_search_input">
                                <button type="submit" class="btn">Search</button>
                         </div>
                    </form>
                        <div id="tipue_search_content"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
    </div>

    </body>
</html>