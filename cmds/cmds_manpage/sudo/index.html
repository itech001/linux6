<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="itech001">
        <link rel="canonical" href="www.linux6.com/cmds/cmds_manpage/sudo/index.html">
        <link rel="shortcut icon" href="../../../favicon.ico">
        

        <title>sudo - Linux6</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../../index.html">Linux6</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Env <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../env/virtualbox/index.html">Virtualbox</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/vim_setting/index.html">VIM_setting</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/vi/index.html">VIM_intro</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/vim_cheatsheet/index.html">VIM_cheatsheet</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/dotfiles/index.html">Dotfiles</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/alias/index.html">Alias</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/shortcut/index.html">Shortcut</a>
                        </li>
                    
                        <li >
                            <a href="../../../env/tmux/index.html">Tmux</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cmds <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../cmds_common/index.html">cmds_common</a>
                        </li>
                    
                        <li >
                            <a href="../../cmds_example/index.html">cmds_example</a>
                        </li>
                    
                        <li >
                            <a href="../../cmds_overview/index.html">cmds_man</a>
                        </li>
                    
                        <li >
                            <a href="../../find/index.html">find</a>
                        </li>
                    
                        <li >
                            <a href="../../xargs/index.html">xargs</a>
                        </li>
                    
                        <li >
                            <a href="../../grep/index.html">grep</a>
                        </li>
                    
                        <li >
                            <a href="../../sed/index.html">sed</a>
                        </li>
                    
                        <li >
                            <a href="../../awk/index.html">awk</a>
                        </li>
                    
                        <li >
                            <a href="../../for/index.html">for</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Script <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../shell/bash/index.html">Bash</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/bash_example/index.html">Bash_example</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/bash_summary/index.html">Bash_summary</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/bash_bible/index.html">Bash_bible</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/csh/index.html">Csh</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/zsh/index.html">Zsh</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/shell_compare/index.html">Shell_compare</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/perl/index.html">Perl</a>
                        </li>
                    
                        <li >
                            <a href="../../../shell/python/index.html">Python</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dev <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../dev/git/index.html">git-tutorial</a>
                        </li>
                    
                        <li >
                            <a href="../../../dev/git_cheat_sheet/index.html">git-cheat-sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../../dev/gdb/index.html">gdb</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Adv <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../adv/article/index.html">Article</a>
                        </li>
                    
                        <li >
                            <a href="../../../adv/os/index.html">OS</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">FAQ <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../faq/common/index.html">Common</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Ref <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../ref/awesome-linux-resources/README/index.html">awesome_linux</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-shell/README/index.html">awesome_shell</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-dotfiles/README/index.html">awesome_dotfiles</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-devenv/README/index.html">awesome_devenv</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-sysadmin/README/index.html">awesome_sysadmin</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome-python/README/index.html">awesome_python</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/free-programming-books/README/index.html">free_programming_book</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/Git-Cheat-Sheet/README/index.html">git_cheat_sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/github-cheat-sheet/README/index.html">github_cheat_sheet</a>
                        </li>
                    
                        <li >
                            <a href="../../../ref/awesome/readme/index.html">awesome</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rss <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../rss/linux_rss2/index.html">Linux RSS</a>
                        </li>
                    
                        <li >
                            <a href="../../../rss/github_rss2/index.html">Github RSS</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../about/about/index.html">About</a>
                        </li>
                    
                        <li >
                            <a href="../../../about/contact_form/index.html">Contact</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                 <li>
                   <a href="#" data-toggle="modal" data-target="#search_modal"><i class="fa fa-search"></i> Search</a>
                 </li>                       
                <li class="disabled">
                    <a rel="next" >
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li class="disabled">
                    <a rel="prev" >
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container" id="main">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#sudo">sudo</a></li>
        
            <li><a href="#name">name</a></li>
        
            <li><a href="#synopsis">synopsis</a></li>
        
            <li><a href="#description">description</a></li>
        
            <li><a href="#command-execution">command execution</a></li>
        
            <li><a href="#exit-value">exit value</a></li>
        
            <li><a href="#security-notes">security notes</a></li>
        
            <li><a href="#environment">environment</a></li>
        
            <li><a href="#files">files</a></li>
        
            <li><a href="#examples">examples</a></li>
        
            <li><a href="#see-also">see also</a></li>
        
            <li><a href="#history">history</a></li>
        
            <li><a href="#authors">authors</a></li>
        
            <li><a href="#caveats">caveats</a></li>
        
            <li><a href="#bugs">bugs</a></li>
        
            <li><a href="#support">support</a></li>
        
            <li><a href="#disclaimer">disclaimer</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="sudo">sudo</h1>
<h3 id="name">name</h3>
<pre><code>     sudo, sudoedit — execute a command as another user

</code></pre>

<h3 id="synopsis">synopsis</h3>
<pre><code>     sudo -h | -K | -k | -V
     sudo -v [-AknS] [-g group] [-h host] [-p prompt] [-u user]
     sudo -l [-AknS] [-g group] [-h host] [-p prompt] [-U user] [-u user] [command]
     sudo [-AbEHnPS] [-C num] [-g group] [-h host] [-p prompt] [-r role] [-t type] [-u user] [VAR=value] [-i | -s] [command]
     sudoedit [-AknS] [-C num] [-g group] [-h host] [-p prompt] [-u user] file ...

</code></pre>

<h3 id="description">description</h3>
<pre><code>     sudo allows a permitted user to execute a command as the superuser or another user, as specified by the security policy.

     sudo supports a plugin architecture for security policies and input/output logging.  Third parties can develop and distribute their own policy and I/O logging plugins to work seamlessly with the sudo front end.  The default security policy is sudoers, which is configured via the file /etc/sudoers, or via LDAP.  See the Plugins section for more information.

     The security policy determines what privileges, if any, a user has to run sudo.  The policy may require that users authenticate themselves with a password or another authentication mechanism.  If authentication is required, sudo will exit if the user's password is not entered within a configurable time limit.  This limit is policy-specific; the default password prompt timeout for the sudoers security policy is unlimited.

     Security policies may support credential caching to allow the user to run sudo again for a period of time without requiring authentication.  The sudoers policy caches credentials for 15 minutes, unless overridden in sudoers(5).  By running sudo with the -v option, a user can update the cached credentials without running a command.

     When invoked as sudoedit, the -e option (described below), is implied.

     Security policies may log successful and failed attempts to use sudo.  If an I/O plugin is configured, the running command's input and output may be logged as well.

     The options are as follows:

     -A, --askpass
                 Normally, if sudo requires a password, it will read it from the user's terminal.  If the -A (askpass) option is specified, a (possibly graphical) helper program is executed to read the user's password and output the password to the standard output.  If the SUDO_ASKPASS environment variable is set, it specifies the path to the helper program.  Otherwise, if sudo.conf(5) contains a line specifying the askpass program, that value will be used.  For example:

                     # Path to askpass helper program
                     Path askpass /usr/X11R6/bin/ssh-askpass

                 If no askpass program is available, sudo will exit with an error.

     -b, --background
                 Run the given command in the background.  Note that it is not possible to use shell job control to manipulate background processes started by sudo.  Most interactive commands will fail to work properly in background mode.

     -C num, --close-from=num
                 Close all file descriptors greater than or equal to num before executing a command.  Values less than three are not permitted.  By default, sudo will close all open file descriptors other than standard input, standard output and standard error when executing a command.  The security policy may restrict the user's ability to use this option.  The sudoers policy only permits use of the -C option when the administrator has enabled the closefrom_override option.

     -E, --preserve-env
                 Indicates to the security policy that the user wishes to preserve their existing environment variables.  The security policy may return an error if the user does not have permission to preserve the environment.

     -e, --edit  Edit one or more files instead of running a command.  In lieu of a path name, the string &quot;sudoedit&quot; is used when consulting the security policy.  If the user is authorized by the policy, the following steps are taken:

                 1.   Temporary copies are made of the files to be edited with the owner set to the invoking user.

                 2.   The editor specified by the policy is run to edit the temporary files.  The sudoers policy uses the SUDO_EDITOR, VISUAL and EDITOR environment variables (in that order).  If none of SUDO_EDITOR, VISUAL or EDITOR are set, the first program listed in the editor sudoers(5) option is used.

                 3.   If they have been modified, the temporary files are copied back to their original location and the temporary versions are removed.

                 If the specified file does not exist, it will be created.  Note that unlike most commands run by sudo, the editor is run with the invoking user's environment unmodified.  If, for some reason, sudo is unable to update a file with its edited version, the user will receive a warning and the edited copy will remain in a temporary file.

     -g group, --group=group
                 Run the command with the primary group set to group instead of the primary group specified by the target user's password database entry.  The group may be either a group name or a numeric group ID (GID) prefixed with the ‘#’ character (e.g.  #0 for GID 0).  When running a command as a GID, many shells require that the ‘#’ be escaped with a backslash (‘\’).  If no -u option is specified, the command will be run as the invoking user.  In either case, the primary group will be set to group.

     -H, --set-home
                 Request that the security policy set the HOME environment variable to the home directory specified by the target user's password database entry.  Depending on the policy, this may be the default behavior.

     -h, --help  Display a short help message to the standard output and exit.

     -h host, --host=host
                 Run the command on the specified host if the security policy plugin supports remote commands.  Note that the sudoers plugin does not currently support running remote commands.  This may also be used in conjunction with the -l option to list a user's privileges for the remote host.

     -i, --login
                 Run the shell specified by the target user's password database entry as a login shell.  This means that login-specific resource files such as .profile or .login will be read by the shell.  If a command is specified, it is passed to the shell for execution via the shell's -c option.  If no command is specified, an interactive shell is executed.  sudo attempts to change to that user's home directory before running the shell.  The command is run with an environment similar to the one a user would receive at log in.  The Command Environment section in the sudoers(5) manual documents how the -i option affects the environment in which a command is run when the sudoers policy is in use.

     -K, --remove-timestamp
                 Similar to the -k option, except that it removes the user's cached credentials entirely and may not be used in conjunction with a command or other option.  This option does not require a password.  Not all security policies support credential caching.

     -k, --reset-timestamp
                 When used without a command, invalidates the user's cached credentials.  In other words, the next time sudo is run a password will be required.  This option does not require a password and was added to allow a user to revoke sudo permissions from a .logout file.

                 When used in conjunction with a command or an option that may require a password, this option will cause sudo to ignore the user's cached credentials.  As a result, sudo will prompt for a password (if one is required by the security policy) and will not update the user's cached credentials.

                 Not all security policies support credential caching.

     -l, --list  If no command is specified, list the allowed (and forbidden) commands for the invoking user (or the user specified by the -U option) on the current host.  A longer list format is used if this option is specified multiple times and the security policy supports a verbose output format.

                 If a command is specified and is permitted by the security policy, the fully-qualified path to the command is displayed along with any command line arguments.  If command is specified but not allowed, sudo will exit with a status value of 1.

     -n, --non-interactive
                 Avoid prompting the user for input of any kind.  If a password is required for the command to run, sudo will display an error message and exit.

     -P, --preserve-groups
                 Preserve the invoking user's group vector unaltered.  By default, the sudoers policy will initialize the group vector to the list of groups the target user is a member of.  The real and effective group IDs, however, are still set to match the target user.

     -p prompt, --prompt=prompt
                 Use a custom password prompt with optional escape sequences.  The following percent (‘%’) escape sequences are supported by the sudoers policy:

                 %H  expanded to the host name including the domain name (on if the machine's host name is fully qualified or the fqdn option is set in sudoers(5))

                 %h  expanded to the local host name without the domain name

                 %p  expanded to the name of the user whose password is being requested (respects the rootpw, targetpw, and runaspw flags in sudoers(5))

                 %U  expanded to the login name of the user the command will be run as (defaults to root unless the -u option is also specified)

                 %u  expanded to the invoking user's login name

                 %%  two consecutive ‘%’ characters are collapsed into a single ‘%’ character

                 The custom prompt will override the system password prompt on systems that support PAM unless the passprompt_override flag is disabled in sudoers.

     -r role, --role=role
                 Run the command with an SELinux security context that includes the specified role.

     -S, --stdin
                 Write the prompt to the standard error and read the password from the standard input instead of using the terminal device.  The password must be followed by a newline character.

     -s, --shell
                 Run the shell specified by the SHELL environment variable if it is set or the shell specified by the invoking user's password database entry.  If a command is specified, it is passed to the shell for execution via the shell's -c option.  If no command is specified, an interactive shell is executed.

     -t type, --type=type
                 Run the command with an SELinux security context that includes the specified type.  If no type is specified, the default type is derived from the role.

     -U user, --other-user=user
                 Used in conjunction with the -l option to list the privileges for user instead of for the invoking user.  The security policy may restrict listing other users' privileges.  The sudoers policy only allows root or a user with the ALL privilege on the current host to use this option.

     -u user, --user=user
                 Run the command as a user other than the default target user (usually root ). The user may be either a user name or a numeric user ID (UID) prefixed with the ‘#’ character (e.g.  #0 for UID 0).  When running commands as a UID, many shells require that the ‘#’ be escaped with a backslash (‘\’).  Some security policies may restrict UIDs to those listed in the password database.  The sudoers policy allows UIDs that are not in the password database as long as the targetpw option is not set.  Other security policies may not support this.

     -V, --version
                 Print the sudo version string as well as the version string of the security policy plugin and any I/O plugins.  If the invoking user is already root the -V option will display the arguments passed to configure when sudo was built and plugins may display more verbose information such as default options.

     -v, --validate
                 Update the user's cached credentials, authenticating the user if necessary.  For the sudoers plugin, this extends the sudo timeout for another 15 minutes by default, but does not run a command.  Not all security policies support cached credentials.

     --          The -- option indicates that sudo should stop processing command line arguments.

     Environment variables to be set for the command may also be passed on the command line in the form of VAR=value, e.g. LD_LIBRARY_PATH=/usr/local/pkg/lib.  Variables passed on the command line are subject to restrictions imposed by the security policy plugin.  The sudoers policy subjects variables passed on the command line to the same restrictions as normal environment variables with one important exception.  If the setenv option is set in sudoers, the command to be run has the SETENV tag set or the command matched is ALL, the user may set variables that would otherwise be forbidden.  See sudoers(5) for more information.

</code></pre>

<h3 id="command-execution">command execution</h3>
<pre><code>     When sudo executes a command, the security policy specifies the execution environment for the command.  Typically, the real and effective user and group and IDs are set to match those of the target user, as specified in the password database, and the group vector is initialized based on the group database (unless the -P option was specified).

     The following parameters may be specified by security policy:

     ·   real and effective user ID

     ·   real and effective group ID

     ·   supplementary group IDs

     ·   the environment list

     ·   current working directory

     ·   file creation mode mask (umask)

     ·   SELinux role and type

     ·   scheduling priority (aka nice value)

   Process model
     When sudo runs a command, it calls fork(2), sets up the execution environment as described above, and calls the execve system call in the child process.  The main sudo process waits until the command has completed, then passes the command's exit status to the security policy's close function and exits.  If an I/O logging plugin is configured or if the security policy explicitly requests it, a new  pseudo-terminal (“pty”) is created and a second sudo process is used to relay job control signals between the user's existing pty and the new pty the command is being run in.  This extra process makes it possible to, for example, suspend and resume the command.  Without it, the command would be in what POSIX terms an “orphaned process group” and it would not receive any job control signals.  As a special case, if the policy plugin does not define a close function and no pty is required, sudo will execute the command directly instead of calling fork(2) first.  The sudoers policy plugin will only define a close function when I/O logging is enabled, a pty is required, or the pam_session or pam_setcred options are enabled.  Note that pam_session and pam_setcred are enabled by default on systems using PAM.

   Signal handling
     When the command is run as a child of the sudo process, sudo will relay signals it receives to the command.  Unless the command is being run in a new pty, the SIGHUP, SIGINT and SIGQUIT signals are not relayed unless they are sent by a user process, not the kernel.  Otherwise, the command would receive SIGINT twice every time the user entered control-C.  Some signals, such as SIGSTOP and SIGKILL, cannot be caught and thus will not be relayed to the command.  As a general rule, SIGTSTP should be used instead of SIGSTOP when you wish to suspend a command being run by sudo.

     As a special case, sudo will not relay signals that were sent by the command it is running.  This prevents the command from accidentally killing itself.  On some systems, the reboot(8) command sends SIGTERM to all non-system processes other than itself before rebooting the system.  This prevents sudo from relaying the SIGTERM signal it received back to reboot(8), which might then exit before the system was actually rebooted, leaving it in a half-dead state similar to single user mode.  Note, however, that this check only applies to the command run by sudo and not any other processes that the command may create.  As a result, running a script that calls reboot(8) or shutdown(8) via sudo may cause the system to end up in this undefined state unless the reboot(8) or shutdown(8) are run using the exec() family of functions instead of system() (which interposes a shell between the command and the calling process).

     If no I/O logging plugins are loaded and the policy plugin has not defined a close() function, set a command timeout or required that the command be run in a new pty, sudo may execute the command directly instead of running it as a child process.

   Plugins
     Plugins may be specified via Plugin directives in the sudo.conf(5) file.  They may be loaded as dynamic shared objects (on systems that support them), or compiled directly into the sudo binary.  If no sudo.conf(5) file is present, or it contains no Plugin lines, sudo will use the traditional sudoers security policy and I/O logging.  See the sudo.conf(5) manual for details of the /etc/sudo.conf file and the sudo_plugin(8) manual for more information about the sudo plugin architecture.

</code></pre>

<h3 id="exit-value">exit value</h3>
<pre><code>     Upon successful execution of a program, the exit status from sudo will simply be the exit status of the program that was executed.

     Otherwise, sudo exits with a value of 1 if there is a configuration/permission problem or if sudo cannot execute the given command.  In the latter case the error string is printed to the standard error.  If sudo cannot stat(2) one or more entries in the user's PATH, an error is printed on stderr.  (If the directory does not exist or if it is not really a directory, the entry is ignored and no error is printed.)  This should not happen under normal circumstances.  The most common reason for stat(2) to return “permission denied” is if you are running an automounter and one of the directories in your PATH is on a machine that is currently unreachable.

</code></pre>

<h3 id="security-notes">security notes</h3>
<pre><code>     sudo tries to be safe when executing external commands.

     To prevent command spoofing, sudo checks &quot;.&quot; and &quot;&quot; (both denoting current directory) last when searching for a command in the user's PATH (if one or both are in the PATH).  Note, however, that the actual PATH environment variable is not modified and is passed unchanged to the program that sudo executes.

     Please note that sudo will normally only log the command it explicitly runs.  If a user runs a command such as sudo su or sudo sh, subsequent commands run from that shell are not subject to sudo's security policy.  The same is true for commands that offer shell escapes (including most editors).  If I/O logging is enabled, subsequent commands will have their input and/or output logged, but there will not be traditional logs for those commands.  Because of this, care must be taken when giving users access to commands via sudo to verify that the command does not inadvertently give the user an effective root shell.  For more information, please see the PREVENTING SHELL ESCAPES section in sudoers(5).

     To prevent the disclosure of potentially sensitive information, sudo disables core dumps by default while it is executing (they are re-enabled for the command that is run).  To aid in debugging sudo crashes, you may wish to re-enable core dumps by setting “disable_coredump” to false in the sudo.conf(5) file as follows:

           Set disable_coredump false

     See the sudo.conf(5) manual for more information.

</code></pre>

<h3 id="environment">environment</h3>
<pre><code>     sudo utilizes the following environment variables.  The security policy has control over the actual content of the command's environment.

     EDITOR           Default editor to use in -e (sudoedit) mode if neither SUDO_EDITOR nor VISUAL is set.

     MAIL             In -i mode or when env_reset is enabled in sudoers, set to the mail spool of the target user.

     HOME             Set to the home directory of the target user if -i or -H are specified, env_reset or always_set_home are set in sudoers, or when the -s option is specified and set_home is set in sudoers.

     PATH             May be overridden by the security policy.

     SHELL            Used to determine shell to run with -s option.

     SUDO_ASKPASS     Specifies the path to a helper program used to read the password if no terminal is available or if the -A option is specified.

     SUDO_COMMAND     Set to the command run by sudo.

     SUDO_EDITOR      Default editor to use in -e (sudoedit) mode.

     SUDO_GID         Set to the group ID of the user who invoked sudo.

     SUDO_PROMPT      Used as the default password prompt.

     SUDO_PS1         If set, PS1 will be set to its value for the program being run.

     SUDO_UID         Set to the user ID of the user who invoked sudo.

     SUDO_USER        Set to the login name of the user who invoked sudo.

     USER             Set to the target user (root unless the -u option is specified).

     VISUAL           Default editor to use in -e (sudoedit) mode if SUDO_EDITOR is not set.

</code></pre>

<h3 id="files">files</h3>
<pre><code>     /etc/sudo.conf            sudo front end configuration

</code></pre>

<h3 id="examples">examples</h3>
<pre><code>     Note: the following examples assume a properly configured security policy.

     To get a file listing of an unreadable directory:

           $ sudo ls /usr/local/protected

     To list the home directory of user yaz on a machine where the file system holding ~yaz is not exported as root:

           $ sudo -u yaz ls ~yaz

     To edit the index.html file as user www:

           $ sudo -u www vi ~www/htdocs/index.html

     To view system logs only accessible to root and users in the adm group:

           $ sudo -g adm view /var/log/syslog

     To run an editor as jim with a different primary group:

           $ sudo -u jim -g audio vi ~jim/sound.txt

     To shut down a machine:

           $ sudo shutdown -r +15 &quot;quick reboot&quot;

     To make a usage listing of the directories in the /home partition.  Note that this runs the commands in a sub-shell to make the cd and file redirection work.

           $ sudo sh -c &quot;cd /home ; du -s * | sort -rn &gt; USAGE&quot;

</code></pre>

<h3 id="see-also">see also</h3>
<pre><code>     su(1), stat(2), passwd(5), sudo.conf(5), sudoers(5), sudo_plugin(8), sudoreplay(8), visudo(8)

</code></pre>

<h3 id="history">history</h3>
<pre><code>     See the HISTORY file in the sudo distribution (http://www.sudo.ws/sudo/history.html) for a brief history of sudo.

</code></pre>

<h3 id="authors">authors</h3>
<pre><code>     Many people have worked on sudo over the years; this version consists of code written primarily by:

           Todd C. Miller

     See the CONTRIBUTORS file in the sudo distribution (http://www.sudo.ws/sudo/contributors.html) for an exhaustive list of people who have contributed to sudo.

</code></pre>

<h3 id="caveats">caveats</h3>
<pre><code>     There is no easy way to prevent a user from gaining a root shell if that user is allowed to run arbitrary commands via sudo.  Also, many programs (such as editors) allow the user to run commands via shell escapes, thus avoiding sudo's checks.  However, on most systems it is possible to prevent shell escapes with the sudoers(5) plugin's noexec functionality.

     It is not meaningful to run the cd command directly via sudo, e.g.,

           $ sudo cd /usr/local/protected

     since when the command exits the parent process (your shell) will still be the same.  Please see the EXAMPLES section for more information.

     Running shell scripts via sudo can expose the same kernel bugs that make setuid shell scripts unsafe on some operating systems (if your OS has a /dev/fd/ directory, setuid shell scripts are generally safe).

</code></pre>

<h3 id="bugs">bugs</h3>
<pre><code>     If you feel you have found a bug in sudo, please submit a bug report at http://www.sudo.ws/sudo/bugs/

</code></pre>

<h3 id="support">support</h3>
<pre><code>     Limited free support is available via the sudo-users mailing list, see http://www.sudo.ws/mailman/listinfo/sudo-users to subscribe or search the archives.

</code></pre>

<h3 id="disclaimer">disclaimer</h3>
<pre><code>     sudo is provided “AS IS” and any express or implied warranties, including, but not limited to, the implied warranties of merchantability and fitness for a particular purpose are disclaimed.  See the LICENSE file distributed with sudo or http://www.sudo.ws/sudo/license.html for complete details.

</code></pre>

</div>
        </div>

        <div><hr>
        <div class="container" id="footer">
        <div class="col-md-12">
            
                <p><div align="center">联系作者:<a href=mailto:itech001@126.com>itech001@126.com</a>, 提交代码 <a href=https://github.com/itech001/linux6>github</a>, <font size="4" color=red>微信公众号cicdops</font><br> <img src=https://github.com/itech001/linux6/blob/master/gzh8.jpg?raw=true height="200" width="200"></div>.</p>
            
        </div>
        </div>
        </div>

        <script src="../../../js/prettify-1.0.min.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/tipuesearch/tipuesearch_content.js"></script>
        <script src="../../../js/tipuesearch/tipuesearch.js"></script>
        <script src="../../../js/tipuesearch/tipuesearch_set.js"></script>
        <script src="../../../js/base.js"></script>
        <script src="../../../"></script>


<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5497b1a160364736" async="async"></script>


    <div class="modal" id="search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                   <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search words into the box below and click
                            "search".
                        </p>
                        <form role="form">
                        <div class="form-group">
                                <input type="text" class="form-control" name="q" id="tipue_search_input">
                                <button type="submit" class="btn">Search</button>
                         </div>
                    </form>
                        <div id="tipue_search_content"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
    </div>

    </body>
</html>